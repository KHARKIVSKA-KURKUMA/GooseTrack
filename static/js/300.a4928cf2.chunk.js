"use strict";(self.webpackChunkgoose_track=self.webpackChunkgoose_track||[]).push([[300],{93300:function(e,r,t){t.r(r),t.d(r,{default:function(){return I}});var a=t(15861),n=t(29439),s=t(64687),i=t.n(s),l=t(72791),o=t(59434),c=t(67427),u=t(55705),d=t(98532),h=t(80184),p=function(e){var r=e.touched,t=e.errors,a=e.title,n=e.type,s=e.name,i=e.placeholder,l=void 0===i?null:i,c=e.values,u=(0,o.v9)((function(e){return e.theme})),p="light"===u?"#111":"rgba(250, 250, 250, 0.30)",m="light"===u?"#111111":"#FFFFFF",y="light"===u?"rgba(17, 17, 17, 0.15)":"rgba(255, 255, 255, 0.15)";return(0,h.jsxs)(d.__,{colorTitle:p,style:{color:r&&t?"#E74A3B":r&&!t&&"#3CBC81",borderColor:r&&t?"#E74A3B":r&&!t&&"#3CBC81"},children:[a," ",(0,h.jsxs)(d.kF,{children:[(0,h.jsx)(d.II,{border:y,color:m,type:n,name:s,placeholder:l,style:{color:r&&t?"#E74A3B":r&&!t&&"#3CBC81",borderColor:r&&t?"#E74A3B":r&&!t&&"#3CBC81"}}),r&&t&&(0,h.jsx)(d.Pz,{}),r&&!t&&(0,h.jsx)(d.vj,{})]}),r&&!t&&c.length>0&&(0,h.jsxs)(d.pI,{children:["This is an CORRECT ",s]}),(0,h.jsx)(d.a9,{name:s,component:"p"})]})},m=t(9085),y=t(8007),x=/^(?!.@.@.$)(?!.@.--...$)(?!.@.-..$)(?!.@.-$)((.*)?@[a-z0-9]{1,}.[a-z]{2,}(.[a-z]{2,})?)$/,f=/^[+]?[(]?[0-9]{1,4}[)]?[-\s.]?[0-9]{1,3}[-\s.]?[0-9]{1,4}[-\s.]?[0-9]{1,4}$/,v=/^@[A-Za-z0-9_.-]{3,50}$/,j=y.Ry().shape({name:y.Z_().matches(/^[^0-9]+$/,"Name should contain only letters").min(2,"Must be at least 2 characters!").max(16,"Must be up to 16 characters!").required("Name is required"),birthday:y.Z_("Please enter your full date of birth").required("Birthday is required"),email:y.Z_().email("Invalid email format").matches(x,"Invalid email format").required("Email is required"),phone:y.Z_().matches(f,"Invalid phone number format").min(6,"At least 7 digits is required"),skype:y.Z_().matches(v,"Invalid skype username format").max(50,"At most 50 digits is required"),avatarURL:y.Z_()}),b=t(70274),g=t(91951);var k=t(71652),F=t(24750),C=t(97892),Z=t.n(C),_=t(33521),A=function(){var e=new Date;return(0,g.default)(e,"yyyy-MM-dd")}(),w=function(){var e=(0,l.useState)(null),r=(0,n.Z)(e,2),t=r[0],s=r[1],y=(0,l.useState)(null),x=(0,n.Z)(y,2),f=x[0],v=x[1],g=(0,l.useState)(!1),C=(0,n.Z)(g,2),w=C[0],B=C[1],E=(0,o.v9)((function(e){return e.user.isFulfilled})),I=(0,o.I0)(),S=(0,o.v9)(c.d),M=(0,l.useState)(!0),U=(0,n.Z)(M,2),q=U[0],R=U[1],T=(0,o.v9)((function(e){return e.theme})),Y="light"===T?"#FFF":"#21222C",$="light"===T?"#343434":"#FFF",z="light"===T?"#343434":"rgba(250, 250, 250, 0.30)",D="light"===T?"#111":"rgba(250, 250, 250, 0.30)",L="light"===T?"#111111":"#FFFFFF",P="light"===T?"inherit":"rgba(255, 255, 255, 0.15)",N=localStorage.getItem("refreshToken");if((0,l.useEffect)((function(){I((0,b.k)()).then((function(){R(!1)})).catch((function(e){console.error("\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u0437\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f \u0434\u0430\u043d\u0438\u0445:",e)}))}),[I,N]),q)return(0,h.jsx)(d.zL,{children:(0,h.jsx)(_.Z,{})});var O=function(){var e=(0,a.Z)(i().mark((function e(r){var t,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.target.files[0]){e.next=3;break}return e.abrupt("return");case 3:a=URL.createObjectURL(t),s(a),v(t),B(!0);case 7:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),V=S.name,G=S.birthday,J=S.email,H=S.phone,K=S.skype,Q=S.avatarURL,W=function(){var e=(0,a.Z)(i().mark((function e(r){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=new FormData).append("name",r.name),t.append("email",r.email),r.phone&&t.append("phone",r.phone),r.skype&&t.append("skype",r.skype),r.birthday&&t.append("birthday",Z()(r.birthday).format("YYYY/MM/DD")),f&&t.append("avatar",f),e.prev=7,e.next=10,I((0,b.N)(t));case 10:return e.next=12,I((0,b.k)());case 12:B(!1),m.Am.success("Profile data changed successfully"),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(7),m.Am.error("Something went wrong... Try again!");case 19:case"end":return e.stop()}}),e,null,[[7,16]])})));return function(r){return e.apply(this,arguments)}}();return E?(0,h.jsx)(u.J9,{initialValues:{name:V||"",birthday:G||"",email:J||"",phone:H||"",skype:K||"",avatarURL:Q||""},validationSchema:j,onSubmit:W,children:function(e){var r=e.values,a=e.setFieldValue,n=e.dirty,s=e.touched,i=e.errors;return(0,h.jsxs)(d.IB,{background:Y,children:[(0,h.jsxs)(d.xu,{position:"relative",display:"block",m:"0 auto",width:"max-content",children:[(0,h.jsxs)(d.m_,{children:[" ",t?(0,h.jsx)(d.Ei,{src:t,alt:"Avatar Preview"}):(0,h.jsx)(d.Ei,{src:Q,alt:"Avatar"})]}),(0,h.jsx)(d.sF,{type:"file",onChange:O,accept:"image/*",id:"add-image"}),(0,h.jsx)(d.My,{htmlFor:"add-image",children:(0,h.jsx)(d.dt,{})})]}),(0,h.jsx)(d.VG,{colorTitleUser:$,children:V}),(0,h.jsx)(d.Dx,{colorTitleUser:z,children:"User"}),(0,h.jsxs)(d.Eq,{children:[(0,h.jsxs)(d.im,{children:[(0,h.jsx)(p,{title:"User name",type:"text",name:"name",touched:s.name,errors:i.name,values:r.name}),(0,h.jsxs)(d.__,{colorTitle:D,children:["Birthday",(0,h.jsx)(k._,{dateAdapter:F.y,children:(0,h.jsx)(d.ZU,{color:L,borderColorInput:P,name:"birthday",type:"date",slotProps:{popper:{sx:d.Mc},textField:{placeholder:G||A}},views:["year","month","day"],format:"YYYY/MM/DD",closeOnSelect:!0,disableFuture:!0,onChange:function(e){a("birthday",e),B(!0)}})})]}),(0,h.jsx)(p,{title:"Email",type:"email",name:"email",touched:s.email,errors:i.email,values:r.email})]}),(0,h.jsxs)(d.im,{children:[(0,h.jsx)(p,{title:"Phone",type:"tel",name:"phone",placeholder:"Add phone number",touched:s.phone,errors:i.phone,values:r.phone}),(0,h.jsx)(p,{title:"Skype",type:"text",name:"skype",placeholder:"Add a skype nickname",touched:s.skype,errors:i.skype,values:r.skype})]})]}),(0,h.jsx)(d.zx,{type:"submit",disabled:!n&&!w,children:"Save changes"})]})}}):void 0},B=t(19532),E=t(26060),I=function(){return(0,h.jsxs)(E.Z,{children:[(0,h.jsx)(B.Z,{}),(0,h.jsx)(w,{})]})}}}]);
//# sourceMappingURL=300.a4928cf2.chunk.js.map