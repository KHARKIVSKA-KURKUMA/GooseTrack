"use strict";(self.webpackChunkgoose_track=self.webpackChunkgoose_track||[]).push([[300],{93300:function(e,a,r){r.r(a),r.d(a,{default:function(){return S}});var t=r(15861),n=r(29439),s=r(64687),i=r.n(s),l=r(72791),o=r(59434),c=r(67427),d=r(55705),u=r(98532),h=r(80184),p=function(e){var a=e.touched,r=e.errors,t=e.title,n=e.type,s=e.name,i=e.placeholder,l=void 0===i?null:i,o=e.values;return(0,h.jsxs)(u.__,{style:{color:a&&r?"#E74A3B":a&&!r&&"#3CBC81",borderColor:a&&r?"#E74A3B":a&&!r&&"#3CBC81"},children:[t," ",(0,h.jsxs)(u.kF,{children:[(0,h.jsx)(u.II,{type:n,name:s,placeholder:l,style:{color:a&&r?"#E74A3B":a&&!r&&"#3CBC81",borderColor:a&&r?"#E74A3B":a&&!r&&"#3CBC81"}}),a&&r&&(0,h.jsx)(u.Pz,{}),a&&!r&&(0,h.jsx)(u.vj,{})]}),a&&!r&&o.length>0&&(0,h.jsxs)(u.pI,{children:["This is an CORRECT ",s]}),(0,h.jsx)(u.a9,{name:s,component:"p"})]})},m=r(9085),y=r(8007),x=/^(?!.@.@.$)(?!.@.--...$)(?!.@.-..$)(?!.@.-$)((.*)?@[a-z0-9]{1,}.[a-z]{2,}(.[a-z]{2,})?)$/,f=/^[+]?[(]?[0-9]{1,4}[)]?[-\s.]?[0-9]{1,3}[-\s.]?[0-9]{1,4}[-\s.]?[0-9]{1,4}$/,v=/^@[A-Za-z0-9_.-]{3,50}$/,j=y.Ry().shape({name:y.Z_().matches(/^[^0-9]+$/,"Name should contain only letters").min(2,"Must be at least 2 characters!").max(16,"Must be up to 16 characters!").required("Name is required"),birthday:y.Z_("Please enter your full date of birth").required("Birthday is required"),email:y.Z_().email("Invalid email format").matches(x,"Invalid email format").required("Email is required"),phone:y.Z_().matches(f,"Invalid phone number format").min(6,"At least 7 digits is required"),skype:y.Z_().matches(v,"Invalid skype username format").max(50,"At most 50 digits is required"),avatarURL:y.Z_()}),k=r(70274),b=r(91951);var Z=r(71652),g=r(24750),C=r(97892),_=r.n(C),A=r(33521),w=function(){var e=new Date;return(0,b.default)(e,"yyyy-MM-dd")}(),B=function(){var e=(0,l.useState)(null),a=(0,n.Z)(e,2),r=a[0],s=a[1],y=(0,l.useState)(null),x=(0,n.Z)(y,2),f=x[0],v=x[1],b=(0,l.useState)(!1),C=(0,n.Z)(b,2),B=C[0],E=C[1],M=(0,o.v9)((function(e){return e.user.isFulfilled})),S=(0,o.I0)(),q=(0,o.v9)(c.d),I=(0,l.useState)(!0),F=(0,n.Z)(I,2),R=F[0],U=F[1];if((0,l.useEffect)((function(){S((0,k.k)()).then((function(){U(!1)})).catch((function(e){console.error("\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u0437\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f \u0434\u0430\u043d\u0438\u0445:",e)}))}),[S]),R)return(0,h.jsx)(u.zL,{children:(0,h.jsx)(A.Z,{})});var Y=function(){var e=(0,t.Z)(i().mark((function e(a){var r,t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a.target.files[0]){e.next=3;break}return e.abrupt("return");case 3:t=URL.createObjectURL(r),s(t),v(r),E(!0);case 7:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),$=q.name,z=q.birthday,D=q.email,L=q.phone,P=q.skype,N=q.avatarURL,O=function(){var e=(0,t.Z)(i().mark((function e(a){var r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new FormData).append("name",a.name),r.append("email",a.email),a.phone&&r.append("phone",a.phone),a.skype&&r.append("skype",a.skype),a.birthday&&r.append("birthday",_()(a.birthday).format("YYYY/MM/DD")),f&&r.append("avatar",f),e.prev=7,e.next=10,S((0,k.N)(r));case 10:return e.next=12,S((0,k.k)());case 12:E(!1),m.Am.success("Profile data changed successfully"),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(7),m.Am.error("Something went wrong... Try again!");case 19:case"end":return e.stop()}}),e,null,[[7,16]])})));return function(a){return e.apply(this,arguments)}}();return M?(0,h.jsx)(d.J9,{initialValues:{name:$||"",birthday:z||"",email:D||"",phone:L||"",skype:P||"",avatarURL:N||""},validationSchema:j,onSubmit:O,children:function(e){var a=e.values,t=e.setFieldValue,n=e.dirty,s=e.touched,i=e.errors;return(0,h.jsxs)(u.IB,{children:[(0,h.jsxs)(u.xu,{position:"relative",display:"block",m:"0 auto",width:"max-content",children:[(0,h.jsxs)(u.m_,{children:[" ",r?(0,h.jsx)(u.Ei,{src:r,alt:"Avatar Preview"}):(0,h.jsx)(u.Ei,{src:N,alt:"Avatar"})]}),(0,h.jsx)(u.sF,{type:"file",onChange:Y,accept:"image/*",id:"add-image"}),(0,h.jsx)(u.My,{htmlFor:"add-image",children:(0,h.jsx)(u.dt,{})})]}),(0,h.jsx)(u.VG,{children:$}),(0,h.jsx)(u.Dx,{children:"User"}),(0,h.jsxs)(u.Eq,{children:[(0,h.jsxs)(u.im,{children:[(0,h.jsx)(p,{title:"User name",type:"text",name:"name",touched:s.name,errors:i.name,values:a.name}),(0,h.jsxs)(u.__,{children:["Birthday",(0,h.jsx)(Z._,{dateAdapter:g.y,children:(0,h.jsx)(u.ZU,{name:"birthday",type:"date",slotProps:{popper:{sx:u.Mc},textField:{placeholder:z||w}},views:["year","month","day"],format:"YYYY/MM/DD",closeOnSelect:!0,disableFuture:!0,onChange:function(e){t("birthday",e),E(!0)}})})]}),(0,h.jsx)(p,{title:"Email",type:"email",name:"email",touched:s.email,errors:i.email,values:a.email})]}),(0,h.jsxs)(u.im,{children:[(0,h.jsx)(p,{title:"Phone",type:"tel",name:"phone",placeholder:"Add phone number",touched:s.phone,errors:i.phone,values:a.phone}),(0,h.jsx)(p,{title:"Skype",type:"text",name:"skype",placeholder:"Add a skype nickname",touched:s.skype,errors:i.skype,values:a.skype})]})]}),(0,h.jsx)(u.zx,{type:"submit",disabled:!n&&!B,children:"Save changes"})]})}}):void 0},E=r(19532),M=r(26060),S=function(){return(0,h.jsxs)(M.Z,{children:[(0,h.jsx)(E.Z,{}),(0,h.jsx)(B,{})]})}}}]);
//# sourceMappingURL=300.e549a10a.chunk.js.map